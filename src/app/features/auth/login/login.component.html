<div class="login-container">
  <p-card styleClass="login-card">
    <div class="login-content">
      <h1 class="login-title">GameVault</h1>
      <p class="login-subtitle">Zaloguj się, aby kontynuować</p>

      @if (errorMessage()) {
        <p-message severity="error" [text]="errorMessage()!" styleClass="w-full mb-3"></p-message>
      }

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
        <div class="field-wrapper">
          <label for="email" class="field-label">Email</label>
          <input
            pInputText
            id="email"
            type="email"
            formControlName="email"
            placeholder="twoj@email.com"
            class="w-full"
            [class.ng-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
          />
          @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
            <small class="p-error">
              @if (loginForm.get('email')?.errors?.['required']) {
                Email jest wymagany
              } @else if (loginForm.get('email')?.errors?.['email']) {
                Nieprawidłowy format email
              }
            </small>
          }
        </div>

        <div class="field-wrapper">
          <label for="password" class="field-label">Hasło</label>
          <p-password
            id="password"
            formControlName="password"
            placeholder="Hasło"
            [feedback]="false"
            [toggleMask]="true"
            styleClass="w-full"
            [inputStyleClass]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched ? 'ng-invalid' : ''"
          ></p-password>
          @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
            <small class="p-error">
              @if (loginForm.get('password')?.errors?.['required']) {
                Hasło jest wymagane
              } @else if (loginForm.get('password')?.errors?.['minlength']) {
                Hasło musi mieć minimum 6 znaków
              }
            </small>
          }
        </div>

        <p-button
          type="submit"
          label="Zaloguj się"
          icon="pi pi-sign-in"
          [loading]="loading()"
          [disabled]="loginForm.invalid || loading()"
          styleClass="w-full"
        ></p-button>
      </form>
    </div>
  </p-card>
</div>

